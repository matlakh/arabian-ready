!function($){"use strict";var plugin={name:"FormJS",version:"2.1.3",mode:"normal",data:{setting:"setting",general:"general",plugin:"plugin",exitpopup:"exitpopup",terms:"terms",waitpopup:"waitpopup",saleagent:"saleagent",pushmaze:"pushmaze"},event:{ajax:"ajax",ready:"ready",exit:{mouse:"exit:mouse",timer:"exit:timer"},terms:{open:"terms:open",opened:"terms:opened",close:"terms:close",closed:"terms:closed"},register:{done:"register:done",fail:"register:fail",always:"register:always"},pushmaze:{ready:"pushmaze:ready"},geoip:"geoip",saleagent:{open:"saleagent:open",send:"saleagent:send",close:"saleagent:close"}},message:{invalidUrl:"Not valid URL",notFound:"File not found"},test:{formCSS:"test-form-css"},ajax:{setup:{type:"GET",method:"GET",global:!0,async:!0,dataType:"text",contentType:"text/plain",mimeType:"text/plain",dataFilter:function(e){return tag(e,general.template)}},script:{success:function(e){$.globalEval("try {\n\t"+e+'\n} catch (error) {\n\tconsole.error("'+plugin.name+': Error in javascript file", "'+this.url+'", error);\n}')}},style:{success:function(e){var t=this.url;$.each(general.$style,function(){t.includes($(this).attr("data-file"))&&$(this).attr("data-src",t).append(e)}),general.$head.find('[data-src="'+t+'"]').length||general.$head.prepend('<style type="text/css" data-src="'+t+'">'+e+"</style>")}}}},defaults={path:"js/FormJS",remotePath:"FormJSAuto",external:{"url:first":"https://cdn."+window.location.host,"url:push":"aHR0cHM6Ly9zdXBlcnN0YXJtYXJrZXRpbmcucnUv"},language:"EN",color:"#337ab7",template:{},setup:{},logger:!0,cache:!0,cookie:!1,terms:{default:!0,opened:function(e){},closed:function(e){}},bootstrap:void 0,congrats:void 0,logotype:!1,pushmaze:!1,binding:!0,missed:!1,risk:!1,urlcatch:!1,thanku:!1,payment:!1,exitpopup:!1,waitpopup:!1,saveinput:!1,preferred:!0,singlePage:!0,saleagent:{photo:{template:"{url:first}/{remotePath}/img/saleagent/{region}/{gender}/{index}.jpg",range:{woman:[1,1],man:[1,1]}},agent:{range:{woman:[0,25],man:[0,25]}}},register:{done:function(e,t,n){},fail:function(e,t,n){},always:function(e,t,n){}},geoip:function(e,t,n){},files:{translate:"{url:first}/{remotePath}/translate.js",config:["{path}/files/{language}/config.js","{url:first}/{remotePath}/files/{language}/config.js"],form:["{url:first}/{remotePath}/autoform.min.js"],modules:{utils:"{url:first}/{remotePath}/modules/utils.js",intlTelInput:"{url:first}/{remotePath}/modules/intlTelInput.js",parallax:"{url:first}/{remotePath}/modules/parallax.js",styles:"{path}/FormJS.css",risk:"{url:first}/{remotePath}/files/{language}/risk.txt",terms:"{url:first}/{remotePath}/files/{language}/terms.html",congrats:"{url:first}/{remotePath}/files/{language}/congrats.html",payment:"{url:first}/{remotePath}/files/{language}/payment.html",logotype:"{url:first}/{remotePath}/files/{language}/logotype.html",exitpopup:"{url:first}/{remotePath}/files/{language}/ep.html",waitpopup:"{url:first}/{remotePath}/files/{language}/wp.html",cookie:"{url:first}/{remotePath}/files/{language}/cookie.html",pushmaze:{js:"{url:push}pushmaze_nonjq.js",messaging:"{url:first}/{remotePath}/modules/firebase-messaging-sw.js",template:{safari:"{url:first}/{remotePath}/modules/pushmaze/safari.html",material:"{url:first}/{remotePath}/modules/pushmaze/material.html",check:"{url:first}/{remotePath}/modules/pushmaze/check.html"}},saleagent:{html:"{url:first}/{remotePath}/files/{language}/saleagent.html",json:"{url:first}/{remotePath}/files/{language}/saleagent.json"},bootstrap:{js:"{url:first}/{remotePath}/modules/bootstrap/bootstrap.modal.js",css:"{url:first}/{remotePath}/modules/bootstrap/bootstrap.modal.css"},owlCarousel:{js:"{url:first}/{remotePath}/modules/owlCarousel/owl.carousel.js",css:"{url:first}/{remotePath}/modules/owlCarousel/owl.carousel.css"}}}},general={$document:$(document),$body:$(document.body),$head:$(document.head),$form:$(),inputEvent:"input",template:{},Form:{},Config:{},iframeCookie:{},$style:$("style[data-file]"),apply:null,selector:{cookie:"#cookie-bar",logotype:".owl-form-logotype",payment:".owl-payment",form:"form.form-container",congrats:".congrats",saleagent:".saleagent",parallax:"#parallax",terms:{container:".terms",use:".terms--use",policy:".terms--policy",cookie:".terms--cookie"},exitpopup:".exitpopup",waitpopup:".waitpopup"},cookie:{name:"cookies-state",value:"accepted"},is:{bootstrap:!!$().modal,owlCarousel:!!$().owlCarousel,intlTelInput:!!$().intlTelInput,utils:!!window.intlTelInputUtils,parallax:!!window.Parallax,pushmaze:!!window._pmq},catch:{send:"sendForm",geoip:"geoip",code:"code",phone:"check/phone"},promise:{init:getPromise(),config:getPromise(),form:getPromise(),firstneed:getPromise(),include:getPromise(),terms:getPromise(),congrats:getPromise(),custom:getPromise(),risk:getPromise(),logotype:getPromise(),geoip:getPromise(),payment:getPromise(),exitpopup:getPromise(),cookie:getPromise(),waitpopup:getPromise(),saleagent:getPromise(),pushmaze:getPromise()}},flags={};function getRandom(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function verifyCSS(e,t,n){var o=plugin.name+"_"+Date.now(),a=general.$body.append($("<"+e+"/>",$.extend({},t,{id:o}))).find("#"+o),r=!!n(a);return a.remove(),r}function verifyHTML(e){return!!$(e).length}function templateLink(e){if("object"==typeof e){if(Array.isArray(e))return $.map(e,function(e){return tag(e,general.template)});for(var t in e)"object"==typeof e[t]?templateLink(e[t]):e[t]=tag(e[t],general.template);return e}return tag(e,general.template)}function message(){if(!1===getSetting(plugin.data.setting).logger)return!1;var e=$.map(Array.prototype.slice.call(arguments,0),function(e){if("string"==typeof e)return tag(e,general.template)});console.error.apply(general.apply,$.merge([plugin.name+":"],e.length?e:[]))}function stringStartsWith(e,t,n){return String.prototype.startsWith?e.startsWith(t,n):(n=n||0,e.indexOf(t,n)===n)}function parseHTML(e){var t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children}function requestAll(e,t){var n=[];return e.forEach(function(){n.push(t.apply(general.apply,arguments))}),$.when.apply(general.apply,n)}function ajax(e,t){return void 0!==e&&"string"!=typeof e?(message(plugin.message.invalidUrl,e),getPromise("reject",e)):$.ajax($.extend(!0,{},plugin.ajax.setup,t,{url:tag(e,general.template)})).fail(function(){message(plugin.message.notFound,e)}).always(function(e,t,n){var o=this;triggerEvent(plugin.event.ajax,function(e){return e?-1!==o.url.indexOf(e)&&o.url:o.url},e,n,o)})}function triggerEvent(e){var t=Array.prototype.slice.call(arguments,1);general.$document.trigger(e+"."+plugin.name,t.length?t:void 0)}function tag(e,t,n){if(!["string","object"].includes(typeof e))return e;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))if("object"!=typeof t[o]||null===t[o]||Array.isArray(t[o]))e=e.replace(new RegExp("{"+o+"}","g"),t[o]);else{var a={};for(var r in t[o]){try{void 0===n?(n=t,a[o]=!0):a[o]=!0}catch(e){}a[o+"."+r]=t[o][r]}e=tag(e,a,n)}return e}function objectPath(e,t,n){var o=t.split("."),a=function(e,t){return e.reduce(function(e,t){return e[t]},t)};if(n){var r=o.pop();return a(o,e)[r]=n,e}return a(o,e)}function eachObject(e,t){if(t)for(var n in e)t(e[n],$.isNumeric(n)?Number(n):n,e)}function getPromise(e,t){var n=$.Deferred();return e&&n[e].apply(general.apply,Array.prototype.slice.call(arguments,1)||[]),n}function getSetting(e){var t=window[plugin.name];return e?t[e]:t}function getSettingInfo(e){var t=function(e){return console.group(decodeURIComponent(escape(window.atob(e))))};console.clear(),t("dmVyc2lvbiAtINCS0LXRgNGB0LjRjyDQv9C70LDQs9C40L3QsA=="),console.log(plugin.version),console.groupEnd(),t("cGF0aCAtINCf0YPRgtGMINC6INC/0LDQv9C60LUg0L/Qu9Cw0LPQuNC90LA="),console.log(e.path),console.groupEnd(),t("bGFuZ3VhZ2UgLSDQr9C30YvQuiDQvNC+0LTRg9C70LXQuSDQv9C70LDQs9C40L3QsA=="),console.log(e.language.toUpperCase()),console.groupEnd(),t("Y29sb3IgLSDQntGB0L3QvtCy0L3QvtC5ICJwcmltYXJ5IiDRhtCy0LXRgiDRgdCw0LnRgtCw"),console.log("%c"+e.color,"background: "+e.color+"; color: #000"),console.groupEnd(),t("ZXh0ZXJuYWwgLSDQktC90LXRiNC90LjQtSBVUkwg0LDQtNGA0LXRgdGB0LAg0LTQu9GPINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINCyINC/0LvQsNCz0LjQvdC1"),console.log(Object.values(e.external).join(", ")),console.groupEnd(),t("Y29va2llIC0g0KTQuNC60YHQuNGA0L7QstCw0L3QvdGL0Lkg0LHQu9C+0Log0YHQvtCz0LvQsNGI0LXQvdC40Y8g0YEg0L/QvtC70LjRgtC40LrQvtC5IENvb2tpZQ=="),console.log(e.cookie),console.groupEnd(),t("d2FpdHBvcHVwIC0g0JzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+INCy0YHQv9C70YvQstCw0Y7RidC40LUg0L/QvtGB0LvQtSDQv9C+0YLQtdGA0Lgg0YTQvtC60YPRgdCwINC90LAg0YTQvtGA0LzQtQ=="),console.log(e.waitpopup),console.groupEnd(),t("c2F2ZWlucHV0IC0g0JDQstGC0L7Qt9Cw0L/QvtC70L3QtdC90LjQtSDQtNCw0L3QvdGL0YUg0YTQvtGA0LzRiyDQuNC3IGNvb2tpZSBtb25leXRyYWNr"),console.log(e.saveinput),console.groupEnd(),t("cHJlZmVycmVkIC0g0JLRi9Cy0L7QtCDQutC90L7Qv9C60LggItCf0L7QutCw0LfQsNGC0Ywg0LTRgNGD0LPQuNC1IiDQv9GA0Lgg0LLRi9Cx0L7RgNC1INGB0YLRgNCw0L3RiyDQsiDQv9C+0LvQtSDRgtC10LvQtdGE0L7QvQ=="),console.log(e.preferred),console.groupEnd(),t("c2FsZWFnZW50IC0g0JzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+INC/0L7RgdC70LUg0YDQtdCz0LjRgdGC0YDQsNGG0LjQuCBTYWxlQWdlbnQ="),console.log(!!window.CONFIG&&window.CONFIG.enableAgentGenderSelector),console.groupEnd(),t("cmVnaXN0ZXIgLSDQodC+0LHRi9GC0LjRjyDRgNC10LPQuNGB0YLRgNCw0YbQuNC4"),t("0KPRgdC/0LXRiNC90L4="),console.log.apply(null,["function(e,t,n){}","function (data, jqXHR, params) { }"].includes(e.register.done.toString())?[!1]:[!0,e.register.done.toString()]),console.groupEnd(),t("0J7RiNC40LHQutCw"),console.log.apply(null,["function(e,t,n){}","function (data, jqXHR, params) { }"].includes(e.register.fail.toString())?[!1]:[!0,e.register.fail.toString()]),console.groupEnd(),t("0JLRgdC10LPQtNCw"),console.log.apply(null,["function(e,t,n){}","function (data, jqXHR, params) { }"].includes(e.register.always.toString())?[!1]:[!0,e.register.always.toString()]),console.groupEnd(),console.groupEnd(),t("cHVzaG1hemUgLSBQVVNIINGD0LLQtdC00L7QvNC70LXQvdC40Y8="),console.log.apply(null,e.pushmaze?[!0,e.pushmaze]:[!1]),console.groupEnd(),t("Y29uZ3JhdHMgLSDQrdC60YDQsNC9INGD0YHQv9C10YjQvdC+0Lkg0YDQtdCz0LjRgdGC0YDQsNGG0LjQuA=="),console.log(!!e.files.modules.congrats),console.groupEnd(),t("dGVybXMgLSDQnNC+0LTQsNC70YzQvdGL0LUg0L7QutC90LAgItCf0L7Qu9C40YLQuNC60LgsINCh0L7Qs9C70LDRiNC10L3QuNGPLCBDb29raWU="),console.log(!!e.files.modules.terms),console.groupEnd(),t("cmlzayAtINCi0LXQutGB0YIg0L/RgNC10LTRg9C/0YDQtdC20LTQtdC90LjRjyDQviDRgNC40YHQutCw0YU="),console.log.apply(null,e.risk?[!0,e.risk]:[!1]),console.groupEnd(),t("dXJsY2F0Y2ggLSDQn9C10YDQtdGF0LLQsNGCIEdldCDQv9Cw0YDQsNC80LXRgtGA0L7QsiBVUkwg0LTQu9GPINC00LLRg9GF0YHRgtGA0LDQvdC40YfQvdGL0YUg0YTQvtGA0Lw="),console.log(e.urlcatch),console.groupEnd(),t("YmluZGluZyAtINCU0LLRg9GF0YHRgtC+0YDQvtC90L3Rj9GPINC/0YDQuNCy0Y/Qt9C60LAg0LfQsNC/0L7Qu9C90LXQvdC40Y8g0YTQvtGA0Lw="),console.log(e.binding),console.groupEnd(),t("bWlzc2VkIC0g0J/RgNC+0LzQsNGFINC/0L4g0LDQutGC0LjQstC90YvQvCDRjdC70LXQvNC10L3RgtCw0Lw="),console.log.apply(null,e.missed?[!0,e.missed]:[!1]),console.groupEnd(),t("cGF5bWVudCAtINCb0LXQvdGC0LAg0LvQvtCz0L7RgtC40L/QvtCyINC/0LvQsNGC0ZHQttC90YvRhSDRgdC40YHRgtC10Lw="),console.log.apply(null,e.payment?[!0,e.payment]:[!1]),console.groupEnd(),t("bG9nb3R5cGUgLSDQm9C10L3RgtCwINC70L7Qs9C+0YLQuNC/0L7QsiDQv9C+0LQg0YTQvtGA0LzQvtC5"),console.log.apply(null,e.logotype?[!0,e.logotype]:[!1]),console.groupEnd(),t("0J/Rg9GC0Lgg0Log0L/QvtC00LrQu9GO0YfQtdC80YvQvCDRhNCw0LnQu9Cw0Lwg0LzQvtC00YPQu9C10Lk="),t("Q29uZmlnLmpz"),console.log(e.files.config),console.groupEnd(),t("Rm9ybS5qcw=="),console.log(e.files.form),console.groupEnd(),t("0JzQvtC00YPQu9C4"),console.log(e.files.modules),console.groupEnd(),console.groupEnd(),t("Y29uZmlnIC0g0J/QsNGA0LDQvNC10YLRgNGLINC40LcgQ29uZmlnLmpz"),console.log(window.CONFIG||!1),console.groupEnd()}function createSetting(e,t,n,o){var a=$.extend(!0,{},e,t);return o&&o(a),window[plugin.name]=$.extend(!0,{},window[plugin.name],createObjectWithKey(n,a)),a}function createObjectWithKey(e,t){var n={};return n[e]=t,n}$.extend(createObjectWithKey(plugin.name,function(options){if("string"==typeof options)return publicMethods.apply(general.apply,arguments);var setting=createSetting(defaults,options,plugin.data.setting,function(e){for(var t in e.language=e.language.toLowerCase(),window.lang=e.language.toLowerCase(),e.external)try{e.external[t]=atob(e.external[t])}catch(e){}general.template=$.extend({},{language:e.language,path:e.path,remotePath:e.remotePath,base:window.location.origin,domain:document.domain,color:e.color},e.template,e.external),e.files.translate=options&&options.files&&options.files.translate?templateLink(options.files.translate):templateLink(e.files.translate),e.files.config=options&&options.files&&options.files.config?templateLink(options.files.config):templateLink(e.files.config),e.files.form=options&&options.files&&options.files.form?templateLink(options.files.form):templateLink(e.files.form),options&&options.files&&options.files.modules?eachObject(options.files.modules,function(e,t){options.files.modules[t]=templateLink(e)}):eachObject(e.files.modules,function(t,n){e.files.modules[n]=templateLink(t)})});function modulePreferredCountryList(){var e={list:"ul.country-list",items:"ul.country-list > li.country",preferredClass:"preferred",translate:{ar:"عرض أخرى",de:"Andere anzeigen",dk:"Vis andet",en:"Show other",es:"Mostrar otra",fl:"Näytä muut",fr:"Montrer autre",it:"Mostra altro",no:"Vis andre",pt:"Mostrar outro",ru:"Показать другие",se:"Visa andra"},styles:".country-open-more{display:block;width:100%;border-radius:0;background-color:#eee;color:#000;border:none;padding:10px 0;font-size:14px;margin-top:-5px;outline:0}#country-listbox{overflow-y:auto}",finded:!1,appended:!1,button:function(e){return'<button type="button" data-preferred-button class="country-open-more">'+e+"</button>"}};setting.setup&&setting.setup.preferred&&(e=$.extend(!0,{},e,setting.setup.preferred));var t=e.translate[setting.language];general.promise.geoip.done(function(n){var o=$(e.items,general.$form),a=$(e.list);if(!setting.preferred||!o.hasClass(e.preferredClass))return!1;$.each(o,function(){e.finded||$(this).attr("data-country-code")!==n.toLowerCase()||(a.prepend($(this).clone(!0).addClass(e.preferredClass)),$(this).remove(),e.finded=!0),$(this).hasClass(e.preferredClass)||$(this).hide()});var r=a.find("li.divider").after(e.button(t)).siblings("button[data-preferred-button]");r.on("click touch",function(t){t.preventDefault(),t.stopPropagation(),$(e.items).show(),r.hide()}),$.each(general.$style,function(){var t=$(this).attr("data-src");t&&t.length&&t.includes("FormJS.css")&&($(this).append(e.styles),e.appended=!0)}),e.appended||general.$head.append("<style>"+e.styles+"</style>")})}function moduleSaleAgent(){if(!(!1!==setting.saleagent&&setting.files.modules.saleagent.html&&setting.files.modules.saleagent.json&&general.Config.enableAgentGenderSelector&&general.Form.sendWithPopup))return general.promise.saleagent.resolve();var e=function(e){return e&&general.$body.append(e),moduleSaleAgentEvent(),general.promise.saleagent.resolve()};return verifyHTML(general.selector.saleagent)?e():getSaleAgent().done(function(t){var n=getCommonCountryRegion();ajax(setting.files.modules.saleagent.html,{dataFilter:function(e){return tag(e,$.extend({},general.template,{WomanName:t.woman.name,WomanPhoto:tag(setting.saleagent.photo.template,$.extend({},general.template,{index:getRandom.apply(null,setting.saleagent.photo.range.woman),gender:"woman",region:n})),ManName:t.man.name,ManPhoto:tag(setting.saleagent.photo.template,$.extend({},general.template,{index:getRandom.apply(null,setting.saleagent.photo.range.man),gender:"man",region:n}))}))}}).done(e)}),general.promise.saleagent}function getCommonCountryRegion(e){switch(e||setting.language){case"de":case"dk":case"en":case"es":case"fl":case"fr":case"it":case"no":case"pt":case"se":return"eu";case"ru":return"cis";case"ar":return"ar";default:return"eu"}}function moduleSaleAgentEvent(){var e={animation:300,methods:{open:function(t){$(general.selector.saleagent).fadeIn(e.animation,t),triggerEvent(plugin.event.saleagent.open)},close:function(t){$(general.selector.saleagent).fadeOut(e.animation,t),triggerEvent(plugin.event.saleagent.close)}}};setting.setup&&setting.setup.saleagent&&(e=$.extend(!0,{},e,setting.setup.saleagent)),createSetting(null,e.methods,plugin.data.saleagent),general.$document.on("ajaxComplete",function(t,n,o){o&&o.url&&o.url.includes(general.catch.send)&&e.methods.close()}),$("[data-choose]",general.selector.saleagent).on("click touch",function(e){e.preventDefault();var t=$(this).attr("data-choose");general.Form.sendWithPopup&&(triggerEvent(plugin.event.saleagent.send,t),general.Form.sendWithPopup.call(general.Form,t))})}function getSaleAgent(){return ajax(setting.files.modules.saleagent.json,{dataType:"json",dataFilter:function(e){var t=JSON.parse(e);return JSON.stringify({woman:getRandomSaleAgent(t.woman,"woman"),man:getRandomSaleAgent(t.man,"man")})}})}function getRandomSaleAgent(e,t){var n=getRandom.apply(null,setting.saleagent.agent.range[t]);return e[n]?e[n]:getRandomSaleAgent(e,t)}function moduleCookie(){if(!setting.cookie||!setting.files.modules.cookie||cookie(general.cookie.name).get())return general.promise.cookie.resolve();var e,t=$.extend({},{page:function(){publicCall(plugin.data.terms).open("cookie")},position:"bottom",animation:{duration:300,show:"slideDown",hide:"slideUp"}},!0===setting.cookie?{}:setting.cookie),n=$.extend({},general.template,(e={},"string"==typeof t.page&&(e.page=t.page),e.position=t.position,e));return ajax(setting.files.modules.cookie,{dataFilter:function(e){return tag(e,n)},success:function(e){var n="bottom"===t.position?'<div id="cookie-bar-offset"></div>':"";return $("body").append(n+e),moduleCookieEvent(t,$(general.selector.cookie,document.body),$("#cookie-bar-offset",document.body)),general.promise.cookie.resolve()}}),general.promise.cookie}function moduleCookieEvent(e,t,n){var o=function(){n.css("height",t.height()+"px")};if(t[e.animation.show](e.animation.duration,function(){"bottom"===e.position&&o()}),"bottom"===e.position&&$(window).on("resize",o),$("[data-cookie-accept]",t).on("click touch",function(o){o.preventDefault(),cookie(general.cookie.name).set(general.cookie.value),$.merge(n,t)[e.animation.hide](e.animation.duration)}),"function"==typeof e.page){var a=$("[data-cookie-more]",t);a.attr("href")&&a.attr("href","#").removeAttr("target"),a.on("click touch",function(t){t.preventDefault(),e.page.call(this)})}}function cookie(e){return{get:function(){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return decodeURIComponent(a.substring(t.length,a.length))}return""},set:function(t,n,o){n||(n=365),o||(o="/");var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();return document.cookie=e+"="+encodeURIComponent(t)+";"+r+";path="+o,t}}}function moduleFistInclude(){var e=[];!1!==setting.files.translate&&e.push(setting.files.translate),!1!==setting.files.config&&e.push(setting.files.config),!general.is.intlTelInput&&setting.files.modules.intlTelInput&&e.push(setting.files.modules.intlTelInput),!general.is.utils&&setting.files.modules.utils&&e.push(setting.files.modules.utils),!general.is.owlCarousel&&setting.files.modules.owlCarousel&&e.push(setting.files.modules.owlCarousel.js);var t=[];return!verifyCSS("div",{class:plugin.test.formCSS,text:" "},function(e){return e.width()&&e.height()})&&setting.files.modules.styles&&t.push(setting.files.modules.styles),!general.is.bootstrap&&!1!==setting.bootstrap&&setting.files.modules.bootstrap&&t.push(setting.files.modules.bootstrap.css),$.when(includeStyle(t),includeScript(e)).done(function(){general.Config=window.CONFIG,general.promise.config.resolve(),$.when(moduleExitPopup(),moduleWaitPopup()).done(function(){ajaxCatchPromise(general.catch.geoip,general.promise.geoip).then(function(e,t,n){e=[e,n,t];setting.geoip.apply(this,e),triggerEvent.apply(general.apply,$.merge([plugin.event.geoip],e))}),moduleForm().done(function(){general.Form=window.Form,general.$form=$(general.selector.form),general.promise.form.resolve(),moduleInputBinding(),moduleUrlCatch(),moduleInputSave(),moduleLogotype(),modulePayment(),moduleMissed(),moduleRisk(),general.promise.firstneed.resolve()})})}),general.promise.firstneed}function moduleInputSave(){if(!setting.saveinput)return!1;var e=!0,t={};setIframeCookie();var n=general.$form.find('input[required]:not([name="code"]):not([type="checkbox"]):not([type="hidden"])'),o=general.Form.check_validation.bind(general.Form);getIframeCookie(function(a){e&&(general.iframeCookie=a,t=$.extend({},a,t),$.each(n,function(){var e=$(this).attr("name");$(this).val(general.iframeCookie[e]),o($(this)),"phone"===e&&$(this).trigger("input")}),e=!1)},"base64"),general.$document.on("ajaxComplete",function(e,n,o){o&&o.url&&o.url.includes(general.catch.phone)&&n.always(function(e){if(e&&JSON.parse(e).success){var n=JSON.parse(o.data).phone.replace("+"+general.Form.telInput.intlTelInput("getSelectedCountryData").dialCode,"");t.phone=n,setIframeCookie(t)}})}),n.on("input",debounce(function(){var e=$(this).attr("name");"phone"!==e&&($(this).hasClass("valid")&&(t[e]=$(this).val()),setIframeCookie(t))},200))}function debounce(e,t){var n;return function(){var o=this,a=arguments,r=!n;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(o,a)},t),r&&e.apply(o,a)}}function setIframeCookie(e){var t=$("#iframe-cookie",general.$body);t.length&&t.remove();var n={origin:window.location.origin};return e&&(n.FormJS=btoa(JSON.stringify(e))),n=$.param(n),general.$body.append(tag('<iframe id="iframe-cookie" style="display:none;" src="{url:first}/FormJSWrap/cookie.html?'+n+'" frameborder="0"></iframe>',general.template)),$("#iframe-cookie",general.$body)}function getIframeCookie(e,t){window.addEventListener("message",function(n){if(n.origin===tag("{url:first}",general.template))if(t)switch(t){case"base64":var o=atob(n.data);try{o=JSON.parse(o)}catch(e){}return e(o)}else e(n.data)},!1)}function moduleRisk(){return setting.risk&&setting.files.modules.risk?(ajax(setting.files.modules.risk).done(function(e){switch(typeof setting.risk){case"string":$(setting.risk).append(e);break;case"function":setting.risk(e)}general.promise.risk.resolve()}),general.promise.risk):general.promise.risk.resolve()}function moduleRegister(){var e=function(e){try{if(e.responseText){var t=JSON.parse(e.responseText);return"object"==typeof t?t:JSON.parse(t)}return e.response||{}}catch(t){return e.responseText||{}}};general.$document.on("ajaxComplete",function(t,n,o){if(o&&o.url&&o.url.includes(general.catch.send)){o.data=function(){try{return JSON.parse(o.data)}catch(e){return o.data}}();var a=[e(n),n,o];n.done(function(){setting.register.done.apply(this,a),triggerEvent.apply(general.apply,$.merge([plugin.event.register.done],a))}).fail(function(){var e="object"==typeof a[0]?a[0].code:null;[0,1,3,5,6].includes(e)?(setting.register.done.apply(this,a),triggerEvent.apply(general.apply,$.merge([plugin.event.register.done],a))):(setting.register.fail.apply(this,a),triggerEvent.apply(general.apply,$.merge([plugin.event.register.fail],a)))}).always(function(){setting.register.always.apply(this,a),triggerEvent.apply(general.apply,$.merge([plugin.event.register.always],a))})}})}function catchAjaxSendForm(e){var t=function(e){try{if(e.responseText){var t=JSON.parse(e.responseText);return"object"==typeof t?t:JSON.parse(t)}return e.responseText||{}}catch(t){return e.responseText||{}}};general.$document.on("ajaxComplete",function(n,o,a){if(a&&a.url&&a.url.includes(general.catch.send)){a.data=function(){try{return JSON.parse(a.data)}catch(e){return a.data}}();var r=[t(o),o,a];o.done(function(){e.done&&e.done.apply(this,r)}).fail(function(){var t="object"==typeof r[0]?r[0].code:null;[0,1,3,5,6].includes(t)?e.done&&e.done.apply(this,r):e.fail&&e.fail.apply(this,r)}).always(function(){e.always&&e.always.apply(this,r)})}})}function moduleUrlCatch(){if(!1===setting.urlcatch||!window.location.search)return!1;var e=new URL(window.location.href);$.each(general.$form,function(){$.each($('input[type!="hidden"]',this),function(){var t=e.searchParams.get($(this).attr("name"));t&&$(this).val(t).trigger(general.inputEvent)})})}function moduleThankU(){if(!1===setting.thanku)return!1;window.congrats=function(){};var e=function(e){try{if(e.responseText){var t=JSON.parse(e.responseText);return"object"==typeof t?t:JSON.parse(t)}return e.responseText||{}}catch(t){return e.responseText||{}}};general.$document.on("ajaxComplete",function(t,n,o){if(o&&o.url&&o.url.includes(general.catch.send)){o.data=function(){try{return JSON.parse(o.data)}catch(e){return o.data}}();var a=[e(n),n,o];n.always(function(){var e="object"==typeof a[0]?a[0]:null;if(![0,1,3,5,6].includes(e.code))return!1;var t=encodeURIComponent(e.message);switch(typeof setting.thanku){case"string":return window.location.href=tag(setting.thanku,$.extend({},general.template,{param:"link="+t,name:"link",link:t}));case"function":return setting.thanku(t)}})}})}function moduleInputBinding(){if(!1===setting.binding||general.$form.length<=1)return!1;var e='input[type!="hidden"][name!="phone"]',t='input[name="phone"]',n=$('input[name="code"]',general.$form),o=general.Form.check_validation.bind(general.Form),a=function(e,t){return"["+e+'="'+t+'"]'};$.each(general.$form,function(){var n=this;$(e,n).on(general.inputEvent,function(){var t=general.$form.not(n).find(e+a("name",$(this).attr("name")));t.val($(this).val()),o(t)}),$(t,n).on(general.inputEvent,function(){general.$form.not(n).find(t).val($(this).val()),setTimeout(function(){o($(t,general.$form))})}),$('input[type="checkbox"]',n).on("change",function(){var e=general.$form.not(n).find('input[type="checkbox"]'+a("name",$(this).attr("name")));e.prop("checked",$(this).prop("checked")),o(e)})}),n.on(general.inputEvent,function(){n.not(this).val($(this).val())}),ajaxCatchUp(general.catch.code).done(function(e){!0===JSON.parse(e).success?(general.Form.validation(n),n.attr("disabled",!0)):general.Form.invalidInput(n,"code")}).fail(function(){general.Form.invalidInput(n,"code")}),general.promise.geoip.then(function(){var e=$(t,general.$form);e.on("countrychange",function(){o(e)})})}function moduleMissed(){var e={missed:"data-missed",event:"click touch",area:20,action:"exitpopup"};setting.setup&&setting.setup.missed&&(e=$.extend({},e,setting.setup.missed));var t=function(e,t,n){if("absolute"===n)return{x:t.pageX,y:t.pageY};if("relative"===n){var o=e.get(0).getBoundingClientRect();return{x:o.left+pageXOffset,y:o.top+pageYOffset}}},n=$.extend({},{exitpopup:function(){return publicCall(plugin.data.exitpopup).open()}},!0===setting.missed?{}:setting.missed);general.$document.on(e.event,function(o){var a=$(o.target);if(a.is("["+e.missed+"]"))return!1;var r,i=t(a,o,"absolute");eachObject((r=[],$.each($("["+e.missed+"]"),function(){var e=$(this);r.push($.extend({},t(e,o,"relative"),{native:this,element:e,width:e.width(),height:e.height(),setting:e.data("setting")||{}}))}),r),function(t,o){var a=$.extend({},e,t.setting),r=i.x>=t.x-e.area&&i.x<=t.x+t.width+e.area,s=i.y>=t.y-e.area&&i.y<=t.y+t.width+e.area;if(r&&s){var l=t.element.attr(e.missed)||a.action;l||(l=e.action),n[l]&&n[l].call(t.native)}})})}function publicCall(e){return $[plugin.name](e)}function ajaxCatchPromise(e,t){return ajaxCatchUp(e).done(t.resolve).fail(t.reject),t}function ajaxCatchUp(e,t,n){var o=getPromise();return general.$document.on("ajaxComplete",function(a,r,i){i&&i.url&&i.url.includes(e)&&r.done(function(e){var n=[e,this,a];return t&&t.apply(general.apply,n),o.resolve.apply(general.apply,n)}).fail(function(){var e=$.merge([this],arguments,[a]);return n&&n.apply(general.apply,e),o.reject.apply(general.apply,e)})}),o}function checkIsProduction(){(stringStartsWith(window.location.host,"127.0")||stringStartsWith(window.location.host,"192.168")||stringStartsWith(window.location.host,"localhost")||window.location.host.includes("dev."))&&general.promise.config.done(function(){!function(e,t){var n=["fbq","lead","pixel","matomo","piwik","ga","ym","ttq"];if((window.fbq||window.dataLayer||window._paq||window.ga||window.ym||window.ttq)&&"function"==typeof e)return window.fbq&&(window.fbq=function(){}),window.ym&&(window.ym=function(){}),window.ttq&&(window.ttq=function(){}),window.ga&&(window.ga=function(){}),window.dataLayer&&(window.dataLayer={push:function(){}}),window._paq&&(window._paq={push:function(){}}),e();if(general.Config.externalTrackers)for(var o=0;o<general.Config.externalTrackers.length;o++){var a=general.Config.externalTrackers[o].code.toLowerCase();if(n.some(function(e){return a.includes(e)})&&"function"==typeof e)return e()}if(general.Config.externalTrackerEvents)for(o=0;o<general.Config.externalTrackerEvents.length;o++){a=(r=general.Config.externalTrackerEvents[o]).code.toLowerCase();if(n.some(function(e){return a.includes(e)})&&"function"==typeof e)return e()}if(general.Config.trackersTemplates)for(o=0;o<general.Config.trackersTemplates.length;o++)for(var r=general.Config.trackersTemplates[o].events,i=0;i<r.length;i++){a=r[i].code.toLowerCase();if(n.some(function(e){return a.includes(e)})&&"function"==typeof e)return e()}"function"==typeof t&&t()}(function(){return window.CONFIG=general.Config=$.extend(!0,{},general.Config,{externalTrackers:[{position:"head",code:"console.log('head')"},{position:"body",code:"console.log('body')"}],externalTrackerEvents:[{event:"load",code:"console.log('load event')"},{event:"registration",code:"console.log('registration event')"}],trackersTemplates:[{name:"facebook",enabled:!1},{name:"google",enabled:!1},{name:"yandex",enabled:!1},{name:"tiktok",enabled:!1}]}),message("Forbidden use CRM trackers in Config.js file on localhost or developer server! Config.js trackers did replaced on defaults events automatically")})})}function moduleLogotype(){if(!setting.logotype||!setting.files.modules.logotype)return general.promise.logotype.resolve();var e=function(e){var t={},n={},o=general.selector.logotype;if(!0===setting.logotype)t=e?general.$form.after(e).next(o):$(o);else switch(typeof setting.logotype){case"object":n=setting.logotype,t=e?general.$form.after(e).next(o):$(o);break;case"function":n=setting.logotype.call(general.$form.get(),$(e))||{},t=$(o);break;case"string":t=e?$(setting.logotype).append(e).find(o):$(o)}return"ar"===setting.language&&(n.rtl=!0),t.owlCarousel($.extend(!0,{},{loop:!0,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplaySpeed:1500,responsive:{0:{items:1},375:{items:2},680:{items:3}}},n)),general.promise.logotype.resolve()};return verifyHTML(general.selector.logotype)?e():ajax(setting.files.modules.logotype).done(e),general.promise.logotype}function modulePayment(){if(!setting.payment||!setting.files.modules.payment)return general.promise.payment.resolve();var e=function(e){var t={},n={},o=general.selector.payment;if(!0===setting.payment)t=e?general.$body.append(e).find(o):$(o);else switch(typeof setting.payment){case"object":n=setting.payment,t=e?general.$body.append(e).find(o):$(o);break;case"function":n=setting.payment($(e))||{},t=$(o);break;case"string":t=e?$(setting.payment).append(e).find(o):$(o)}"ar"===setting.language&&(n.rtl=!0),t.owlCarousel($.extend(!0,{},{loop:!0,nav:!1,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplaySpeed:1500,responsive:{0:{items:3},480:{items:4},680:{items:5},991:{items:6},1200:{items:7}}},n)),general.promise.payment.resolve()};return verifyHTML(general.selector.payment)?e():ajax(setting.files.modules.payment).done(e),general.promise.payment}function moduleWaitPopup(){if(!setting.waitpopup||!setting.files.modules.waitpopup)return general.promise.waitpopup.resolve();var e=function(e){return e&&general.$body.append(e),moduleEventWait(),general.promise.waitpopup.resolve()};return verifyHTML(general.selector.waitpopup)?e():ajax(setting.files.modules.waitpopup).done(e),general.promise.waitpopup}function moduleEventWait(){var e={popup:$(".waitpopup"),overlay:$(".waitpopup-overlay"),animation:200,delay:1e4,event:{click:"click touch",in:"focus input",out:"blur"},debounce:1e3,effect:["fadeIn","fadeOut"],methods:{open:function(){e.popup[e.effect[0]](e.animation),e.overlay[e.effect[0]](e.animation)},close:function(){e.popup[e.effect[1]](e.animation),e.overlay[e.effect[1]](e.animation)}}};setting.setup&&setting.setup.waitpopup&&(e=$.extend(!0,{},e,setting.setup.waitpopup)),createSetting(null,e,plugin.data.waitpopup);var t={wait:function(t){if(!t)return!1;var n=[];general.$document.on(e.event.in,general.selector.form+" input",debounce(function(o){n.push(setTimeout(function(){if(!($(document.activeElement).parents(general.selector.form).length||setting.files.modules.congrats&&$(general.selector.congrats).is(":visible")||setting.exitpopup&&$(general.selector.exitpopup).is("visible")))return t();n.pop()},e.delay))},e.debounce)),general.$document.on(e.event.out,general.selector.form+" input",debounce(function(e){n.length>1&&n.forEach(function(e,t){n.length!==t+1&&(clearTimeout(e),n.splice(t,1))})},e.debounce))},event:function(n){eachObject(n,function(n,o){"function"==typeof n&&t[o](function(){n.call({popup:e.popup,overlay:e.overlay},e.methods)})})}};t.event($.extend({},{wait:function(e){e.open()}},!0===setting.waitpopup?{}:setting.waitpopup)),general.$document.on(e.event.click,"[data-waitpopup-close]",function(t){t.preventDefault(),e.methods.close()})}function moduleExitPopup(){if(!setting.exitpopup||!setting.files.modules.exitpopup)return general.promise.exitpopup.resolve();var e=function(e){return e&&general.$body.append(e),moduleEventExit(),general.promise.exitpopup.resolve()};return verifyHTML(general.selector.exitpopup)?e():ajax(setting.files.modules.exitpopup).done(e),general.promise.exitpopup}function moduleEventExit(){var e={popup:$(".exitpopup"),overlay:$(".exitpopup-overlay"),animation:200,timer:45e3,area:10,event:{mouse:"mousemove",click:"click touch"},delay:100,effect:["fadeIn","fadeOut"],onhashchange:!0,methods:{open:function(){e.popup[e.effect[0]](e.animation),e.overlay[e.effect[0]](e.animation)},close:function(){e.popup[e.effect[1]](e.animation),e.overlay[e.effect[1]](e.animation)}}};setting.setup&&setting.setup.exitpopup&&(e=$.extend(!0,{},e,setting.setup.exitpopup)),createSetting(null,e,plugin.data.exitpopup),e.onhashchange&&(window.history.pushState({link:window.location.href},null,window.location.href),window.onpopstate=function(){e.methods.open()});var t=function(e){return(!setting.files.modules.congrats||!$(general.selector.congrats).is(":visible"))&&(!$(document.activeElement).parents(general.selector.form).length&&(!$(general.selector.terms.container).is(":visible")&&!$(general.selector.waitpopup).is(":visible")))},n={mouse:function(n){if(!n)return!1;var o=0;general.$document.on(e.event.mouse,function(a){clearTimeout(o),o=setTimeout(function(){(a.clientY<e.area||a.clientY>window.innerHeight-e.area)&&t()&&(triggerEvent(plugin.event.exit.mouse,e),n())},e.delay)})},timer:function(o){if(!o)return!1;setTimeout(function(){t()&&(triggerEvent(plugin.event.exit.timer,e),o()),n.timer(o)},e.timer)},event:function(t){eachObject(t,function(t,o){"function"==typeof t&&n[o](function(){t.call({popup:e.popup,overlay:e.overlay},e.methods)})})}};n.event($.extend({},{mouse:function(e){e.open()},timer:function(e){return!1}},!0===setting.exitpopup?{}:setting.exitpopup)),general.$document.on(e.event.click,"[data-exitpopup-close]",function(t){t.preventDefault(),e.methods.close()})}function debounce(e,t,n){var o;return function(){var a=this,r=arguments,i=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(a,r)},t),i&&e.apply(a,r)}}function moduleInclude(){var e=[];!general.is.bootstrap&&!1!==setting.bootstrap&&setting.files.modules.bootstrap&&e.push(setting.files.modules.bootstrap.js),!general.is.parallax&&setting.files.modules.parallax&&e.push(setting.files.modules.parallax);var t=[];return!general.is.owlCarousel&&setting.files.modules.owlCarousel&&t.push(setting.files.modules.owlCarousel.css),$.when(includeStyle(t),includeScript(e)).done(function(){return moduleSinglePage(),modulePreferredCountryList(),countryListScrollTop(),modulePushmaze(),general.promise.include.resolve()}),general.promise.include}function modulePushmaze(){if(general.is.pushmaze||!1===setting.pushmaze||!setting.files.modules.pushmaze.js||!setting.files.modules.pushmaze.template||!setting.files.modules.pushmaze.messaging)return general.promise.pushmaze.resolve();var e=$.extend({},{external:"{url:push}",domain:document.domain,token:"",trigger:!0,animation:200,template:"material",ready:function(){},allow:function(){},disallow:function(){}},"string"==typeof setting.pushmaze?{token:setting.pushmaze}:setting.pushmaze||{});if(e.external=tag(e.external,general.template),!setting.files.modules.pushmaze.template[e.template.toLowerCase()])return general.promise.pushmaze.reject();createSetting(null,{allow:e.allow,disallow:e.disallow},plugin.data.pushmaze),window._pmq=window._pmq||[],window.pm_url=e.external,window.d_u=e.domain,window.d_t=e.token,window.firebaseMessagingPath=tag(setting.files.modules.pushmaze.messaging,general.template);var t;return general.promise.geoip.done(function(e){window.countryCode=e}),(t=getPromise(),ajax(setting.files.modules.pushmaze.template[e.template]).done(function(n){general.$document.on("ajaxComplete",function(o,a,r){r&&r.url&&r.url.includes(e.external+"api/domain/check")&&a.done(function(o){if(!o||o&&!o.customization_opt_in)return t.resolve();var a=function(e){return templateLink(createObjectWithKey(plugin.data.pushmaze,{offset:!1,body:{styles:""},promt:{title:{text:e.customization_opt_in.title||"",color:"#000",styles:""},description:{text:e.customization_opt_in.sub_title||"",color:"#5f5f5f",styles:""},size:"default",indent:"15px",position:"tc",background:"#fff",icon:{src:e.customization_opt_in.site_icon||getFavIcons()||"{url:first}/{remotePath}/img/notify-bell.svg",position:"left",opacity:"",styles:""},video:{opacity:"0.4",styles:"",src:{mp4:""}},buttons:{styles:"font-weight: bold;",allow:{text:e.customization_opt_in.allow_button_text||"Allow",color:"#fff",background:"#1165f1",styles:""},disallow:{text:e.customization_opt_in.disallow_button_text||"Don't allow",color:"#1165f1",background:"transparent",styles:""}},hover:{body:"",background:"",container:""}},background:{styles:"",video:null},chicklet:{text:e.customization_opt_in.chicklet_text||"Get Notifications",position:e.customization_opt_in.chicklet_location||"tr",background:e.customization_opt_in.chicklet_background_color||"#0084f6",color:e.customization_opt_in.chicklet_text_color||"#fff",styles:"font-weight: bold;"}}))}(o),r=templateEngine(tag(n,$.extend(!0,{},general.template,a)));if(createSetting(null,{trigger:e.trigger,animation:e.animation,html:r,bodyStyle:r.find("[data-pushmaze-body-style]").html()},plugin.data.pushmaze),$(document).on("ajaxComplete",function(e,t,n){n&&n.url&&n.url.includes(general.catch.send)&&t.done(function(e){1===e.code&&!0===general.Config.registration&&$("[data-pushmaze-disallow]").on("click touch",function(t){t.preventDefault(),window.location.href=e.message})})}),a.pushmaze.offset){var i=$("[data-pushmaze-offset]"),s=$("[data-pushmaze-promt]");i.css("height",s.height()+"px"),$(window).on("resize",function(){i.css("height",s.height()+"px")})}var l="body > *:not([data-template-engine]) { "+a.pushmaze.promt.hover.body+" }",u=".pushmaze-promt-hover-background { position: fixed; display: block; width: 100%; height: 100vh; transform: scale(1.5); z-index: 999999; "+a.pushmaze.promt.hover.background+" }";$("[data-pushmaze-promt]").on({mouseenter:function(){$("head").append("<style data-pushmaze-hover-body>"+l+"</style>"),$("head").append("<style data-pushmaze-hover-background>"+u+"</style>")},mouseleave:function(){$("style[data-pushmaze-hover-body]").remove(),$("style[data-pushmaze-hover-background]").remove()}})})}),includeScript(setting.files.modules.pushmaze.js).done(function(){return t.resolve()}).fail(t.reject)}).fail(t.reject),t).done(function(){e.ready(),general.promise.pushmaze.resolve()}),general.promise.pushmaze}function templateEngine(e){var t=$(parseHTML("<div data-template-engine>"+e+"</div>")),n=function(e){return $("["+e+"]",t)},o="v-show",a="v-if",r="v-else",i="v-hide";return n(o).length&&$.each(n(o),function(){isFalsyString($(this).attr(o))&&$(this).remove(),$(this).removeAttr(o)}),n(a).length&&$.each(n(a),function(){var e=$(this).attr(a),t=$(this).next("["+r+"]");if(e.startsWith("javascript:")){var n=e.replace(/^javascript:/i,"");contextEval(this,$.trim(n))?($(this).removeAttr(a),t.remove()):(t.removeAttr(r),$(this).remove())}else isFalsyString(e)?(t.removeAttr(r),$(this).remove()):($(this).removeAttr(a),t.remove())}),n(i).length&&$.each(n(i),function(){$(this).hide().removeAttr(i)}),t}function contextEval(context,js){return function(){try{return eval(js)}catch(e){console.error("FormJS: Error in contextEval function",e)}}.call(context)}function isFalsyString(e){return["false","NaN","null","undefined","0",""].includes(e)}function getFavIcons(){var e=[];$.each($('link[rel="icon"]',general.$head),function(){var t=$(this).attr("sizes");t&&e.push(window.parseInt(t,10))});var t=Math.max.apply(null,e);return $('link[rel="icon"][sizes="'+t+"x"+t+'"]').attr("href")}function countryListScrollTop(){$("div.flag-container",general.$form).on("click touch",function(e){e.preventDefault(),e.stopPropagation(),$("ul.country-list",this).scrollTop(0)})}function moduleForm(){var e=$[plugin.name+"_Form"];return e?"function"==typeof e?e(setting.files.form):e:getPromise("resolve")}function moduleSinglePage(){if(setting.singlePage){var e=$("form[action]");e.submit(function(t){t.preventDefault(),showPreloader();var n=e.serialize(),o=window.location.href,a=-1===o.indexOf("?")?o+"?"+n:o+"&"+n;window.history.replaceState({},"",a),setTimeout(function(){$.get("./"+e.attr("action")).done(function(e){var t=document.open("text/html","replace");t.write(e),t.close()})},500)})}}function showPreloader(){var e=document.createElement("div"),t=new Image;e.id="firstToSecondPagePreloader",e.setAttribute("style","position:fixed;background:rgba(0,0,0,.85);left:0;top:0;width:100%;height:100%;z-index:999999999;"),t.src=templateLink("{url:first}/{remotePath}/img/spinner.gif"),t.setAttribute("style","position:absolute;display:block;left:50%;top:50%;width:100px;height:100px;transform:translate(-50%,-50%);"),e.appendChild(t),document.body.appendChild(e)}function hidePreloader(){var e=document.getElementById("firstToSecondPagePreloader");document.body.removeChild(e)}function includeScript(e,t){return!e||e&&!e.length?getPromise("resolve"):Array.isArray(e)?requestAll(e,function(e){return Array.isArray(e)?getScript(e):ajax(e,$.extend(!0,{},plugin.ajax.script,t||{}))}):ajax(e,$.extend(!0,{},plugin.ajax.script,t||{}))}function moduleCongrats(){if(!1===setting.congrats||!setting.files.modules.congrats)return window.congrats=function(){},general.promise.congrats.resolve();var e=function(e){e&&general.$body.append(e),moduleCongratsEvent(),general.promise.congrats.resolve()};return verifyHTML(general.selector.congrats)?e():ajax(setting.files.modules.congrats).done(e),general.promise.congrats}function moduleCongratsEvent(){var e={parallax:function(){if(window.Parallax)try{return new Parallax(document.querySelector(general.selector.parallax))}catch(e){return null}return null}(),container:$(".congrats"),close:$(".congrats__close"),titleText:$(".congrats-left__title, .congrats-left__text"),preloader:$(".preloader"),item:function(e){return $(".congrats-right__item-"+e+" img")}};setting.setup&&setting.setup.congrats&&(e=$.extend({},e,setting.setup.congrats)),window.congrats=function(){e.container.fadeIn(200),e.item(1).fadeIn().css({transform:"scale(1)"}),setTimeout(function(){e.item(2).fadeIn(750)},750),setTimeout(function(){e.item(3).fadeIn(750),setTimeout(function(){e.item(3).css({animation:"shake .75s linear"})},500)},1250),e.titleText.slideDown(1200),setTimeout(function(){e.preloader.fadeIn(700)},1e3),e.close.slideDown(1e3)},e.close.on("click touch",function(t){t.preventDefault(),e.container.fadeOut(200)})}function moduleTermsEvent(){var e={animation:200,terms:$(".terms"),overlay:$(".terms-overlay"),window:{use:$(".terms--use"),policy:$(".terms--policy"),cookie:$(".terms--cookie")},event:"click touch",button:{use:".terms-popup",policy:".policy-popup"},trigger:"data-terms",close:"data-terms-close",methods:{open:function(t){if(t){var n=e.window[t.toLowerCase()]||$(".terms--"+t);e.overlay.fadeIn(e.animation),n.fadeIn(e.animation),clearTimeout(o);var o=setTimeout(function(){triggerEvent.apply(general.apply,$.merge([plugin.event.terms.opened],[e])),setting.terms.opened.apply(this,[e])},e.animation);return n}},close:function(){e.overlay.fadeOut(e.animation),e.terms.fadeOut(e.animation),clearTimeout(t);var t=setTimeout(function(){triggerEvent.apply(general.apply,$.merge([plugin.event.terms.closed],[e])),setting.terms.closed.apply(this,[e])},e.animation);return e.terms}}};setting.setup&&setting.setup.terms&&(e=$.extend(!0,{},e,setting.setup.terms)),createSetting(null,e,plugin.data.terms);var t=function(e,t){return t||(t=", "),e.join(t)},n=function(e){return"["+e+"]"};general.$document.on(e.event,n(e.trigger),function(t){t.preventDefault();var n=$(this).attr(e.trigger).toLowerCase();if(!n)return!1;e.methods.open(n)}),general.$document.on(e.event,t([e.button.use,e.button.policy]),function(t){t.preventDefault(),$(this).hasClass(e.button.use.slice(1))?e.methods.open("use"):$(this).hasClass(e.button.policy.slice(1))?e.methods.open("policy"):e.methods.open($(this).attr("data-terms"))}),general.$document.on(e.event,t([".terms__close",n(e.close)]),function(t){t.preventDefault(),e.methods.close()})}function moduleTerms(){if(!1===setting.terms.default||!setting.files.modules.terms)return general.promise.terms.resolve();var e=function(e){return e&&general.$body.append(e),moduleTermsEvent(),general.promise.terms.resolve()};return verifyHTML(general.selector.terms.use)&&verifyHTML(general.selector.terms.policy)&&verifyHTML(general.selector.terms.cookie)?e():ajax(setting.files.modules.terms).done(e),general.promise.terms}function includeStyle(e){return!e||e&&!e.length?getPromise("resolve"):Array.isArray(e)?requestAll(e,function(e){return ajax(e,plugin.ajax.style)}):ajax(e,plugin.ajax.style)}function publicMethods(e){var t=getSetting(plugin.data.setting),n=Array.prototype.slice.call(arguments,1);switch(e.toLowerCase()){case"get":return getSetting.apply(general.apply,n);case"getscript":case"failed":return getScript.apply(general.apply,n);case"exitpopup":return!1===t.exitpopup?message("Параметр настроек exitpopup выключен",t.exitpopup):getSetting(plugin.data.exitpopup).methods;case"waitpopup":return!1===t.waitpopup?message("Параметр настроек waitpopup выключен",t.waitpopup):getSetting(plugin.data.waitpopup).methods;case"terms":return getSetting(plugin.data.terms).methods;case"saleagent":return getSetting(plugin.data.saleagent);case"info":return getSettingInfo(t);case"methods":return{once:function(e,t){flags[t]||(flags[t]=!0,e())},timeoutOnce:function(e,t,n){flags[n]||(flags[n]=!0,setTimeout(t,e))},timeoutLoop:timeoutLoop};case"pushmaze":return{changeTag:function(e){$.post(t.external["url:push"]+"api/subscriber/change_tag",{token:window.window.localStorage.getItem("token"),tag_id:e})},open:function(){$("[data-pushmaze-promt]").fadeIn(),$("[data-pushmaze-background]").fadeIn(),$("[data-pushmaze-chicklet]").fadeOut(),$("[data-pushmaze-background-video]").fadeIn(),$("body").append("<style data-pushmaze-body-style>"+window.FormJS.pushmaze.bodyStyle+"</style>")},close:function(){$("[data-pushmaze-chicklet]").fadeIn(),$("[data-pushmaze-background]").fadeOut(),$("[data-pushmaze-body-style]").remove(),$("[data-pushmaze-promt]").fadeOut(),$("[data-pushmaze-background-video]").fadeOut()}}}}function timeoutLoop(e,t,n,o){if(void 0===o&&(o=0),e.length===o)return n&&n();e[o]&&setTimeout(function(){t(e[o]),timeoutLoop(e,t,n,++o)},e[o])}function getScript(e,t,n){t||(t=0);var o=$.extend(!0,{},plugin.ajax.script,n||{});return Array.isArray(e)?ajax(e[t],o).fail(function(){e[++t]&&getScript(e[t],t,n)}):ajax(e,o)}return plugin=createSetting(null,plugin,plugin.data.plugin,function(e){e.ajax.setup=$.extend({},e.ajax.setup,{ifModified:setting.cache,cache:setting.cache})}),general=createSetting(null,general,plugin.data.general,function(e){e.is.owlCarousel=!(!1!==setting.logotype||!1!==setting.payment||$().owlCarousel)}),checkIsProduction(),moduleFistInclude().done(function(){$.when(moduleInclude(),moduleTerms()).done(function(){moduleCongrats().done(function(){moduleThankU(),moduleRegister(),moduleCookie(),moduleSaleAgent();var e=[setting,general,plugin];triggerEvent.apply(general.apply,$.merge([plugin.event.ready],e)),general.promise.init.resolve.apply(general.apply,e)})})}),general.promise.init}))}(jQuery);